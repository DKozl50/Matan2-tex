\documentclass[a4paper, fleqn]{article}

\usepackage{header}

\usepackage[noend]{algorithmic}
\renewcommand{\algorithmicensure}{\textbf{function}} % use \ENSURE to define function
\renewcommand{\algorithmicrequire}{\textbf{procedure}} % use \REQUIRE to define procedure

\DeclareMathOperator{\dom}{\mathop{\mathrm{dom}}}
\DeclareMathOperator{\rng}{\mathop{\mathrm{rng}}}
\newcommand{\pair}[1]{\langle#1\rangle}
\newcommand{\wo}{\setminus} % AKA without
\newcommand{\void}{\varnothing} % пустое множество
\newcommand{\udv}{\text{не опр.}} % Undefined value
\newcommand{\mred}{\leqslant_m} % m-сводимость
\newcommand{\plot}{\text{Г}} % график функции

\title{Коллоквиум по Дискретной Математике-2}
\author{
    % Откомментируй себя или добавь в список!

    % Александр Богданов   \\ \href{https://t.me/SphericalPotatoInVacuum}{Telegram} \and
    % Алиса Вернигор       \\ \href{https://t.me/allisyonok}{Telegram} \and
    % Анастасия Григорьева \\ \href{https://t.me/weifoll}{Telegram} \and
    Василий Шныпко       \\ \href{https://t.me/yourvash}{Telegram} \and
    % Данил Казанцев       \\ \href{https://t.me/vserosbuybuy}{Telegram} \and
    Денис Козлов         \\ \href{https://t.me/DKozl50}{Telegram} \and
    % Елизавета Орешонок   \\ \href{https://t.me/eaoresh}{Telegram} \and
    % Иван Пешехонов       \\ \href{https://t.me/JohanDDC}{Telegram} \and
    % Иван Добросовестнов  \\ \href{https://t.me/ivankot13}{Telegram} \and
    Ира Голобородько     \\ \href{https://t.me/Ira4kgl}{Telegram} \and
    Марк Рофин           \\ \href{https://t.me/Broccoliman}{Telegram} \and
    % Настя Городилова     \\ \href{https://t.me/nastygorodi}{Telegram} \and
    Никита Насонков      \\ \href{https://t.me/nnv_nick}{Telegram} \and
    % Даниэль Хайбулин      \\ \href{https://t.me/kiDaniel}{Telegram} \and
    % Сергей Лоптев        \\ \href{https://t.me/beast_sl}{Telegram}
}

\date{Версия от {\ddmmyyyydate\today} \currenttime}

% После комментария с номером пишем формулировку вопроса в subsection{...}
% К примеру:

% Вопрос 1
% \subsection{Перечислимые множества суть, в точности, проекции разрешимых.}
% и тут уже решение формулировочки все дела

\begin{document}
    \maketitle

    \tableofcontents

    \newpage

\section{Обозначения в разделе вычислимости}

    \begin{itemize}
        \item Алгоритмы и машины Тьюринга обозначаются рукописными буквами, например, $\mathcal{M}$ (читается как <<M-красивое>> по Дашкову).

        \item $\dom f$ и $\rng f$ --- области определения и значений функции $f$ соответственно.

        \item Мы не пользуемся записью вида $f : A \xrightarrow{p} B$ для частичных функций, а явно указываем, если рассматриваемая функция тотальна.

        \item Привычно равенство функций обозначать как $f = g$, но так как в данном курсе рассматриваются и не всюду определенные функции, то $f(x) \simeq g(x) \iff$ в точке $x$ функции совпадают по значению либо обе не определены.

        \item Функции $\xi$ и $\text{id}_{\NN}$ --- нигде не определенная и тождественная соответственно.
    \end{itemize}

\section{Вопросы по вычислимости}

    % Вопрос вычислимость 1
    \subsection{Вычислимые функции (при интуитивном понимании алгоритма). Разрешимые и перечислимые множества. Связь конечности, разрешимости и перечислимости. Разрешимые множества под действием операций алгебры множеств и декартова произведения. [R, с. 3–4]}

        Алгоритмом в его интуитивном понимании считается конечная последовательность инструкций, которая исполняется по шагам. Алгоритм может принимать на вход аргументы и выдавать какой-то результат.

        \begin{definition}
        Функция $f$ вычислима, если существует алгоритм $\mathcal{A}$, вычисляющий ее. Это значит, что для любого входа $x \in \dom f$ $\mathcal{A}$ выдает результат $f(x)$ за конечное число шагов, а при $x \notin \dom f$ зацикливается (причем неважно, естественным или искусственным образом).
        \end{definition}

        \begin{definition}
        Множество $A$ разрешимо, если вычислима его характеристическая функция
        \begin{equation*}
        \begin{gathered}
        \chi_A(x) =
        \begin{cases}
        1, & x \in A \\
        0, & x \notin A \\
        \end{cases}.
        \end{gathered}
        \end{equation*}
        \end{definition}

        \begin{definition}
        Множество $A$ перечислимо, если существует алгоритм-<<перечислитель>> $\mathcal{A}$ без входа, печатающий каждый элемент $A$ за конечное число шагов, и только элементы $A$. Также $A$ перечислимо тогда и только тогда, когда вычислима его полухаракетристическая функция
        \begin{equation*}
        \begin{gathered}
        \omega_A(x) =
        \begin{cases}
        1, & x \in A \\
        \udv, & x \notin A \\
        \end{cases}.
        \end{gathered}
        \end{equation*}
        Эквивалентность этих определений доказана в билете 4.
        \end{definition}

        \begin{proposition}
            Из конечности множества следует его разрешимость, а из разрешимости --- перечислимость.
        \end{proposition}

        Если $A = \{a_1, a_2, \dots, a_n\}$ конечно, то приведенный ниже код вычисляет характеристическую функцию:

        \algsetup{indent=2em}
        \begin{algorithmic}
        \ENSURE $\chi_A(x)$
            \IF{$x = a_1$ \OR $x = a_2$ \OR $\dots$ \OR $x = a_n$}
                \RETURN 1
            \ELSE
                \RETURN 0
            \ENDIF
        \end{algorithmic}

        %\verb'def' $\chi_A$\verb'(x):'
        %\verb'    return 1 if (x ==' $a_1$ \verb'or x ==' $a_2$ \verb'or' $\dots$ \verb'or x ==' $a_n$\verb') else 0'

        Для бесконечного множества такой трюк невалиден, так как код должен быть \textbf{конечной} последовательностью байт.

        Если $A$ разрешимо, то его характеристическая функция $\chi_A$ вычислима, поэтому данный алгоритм рано или поздно обработает каждое натуральное число, не зациклившись:

        \begin{algorithmic}
        \REQUIRE {\scshape print$_A$()}
            \FORALL{$x \in \NN$}
                \IF{$\chi_A(x)$}
                    \PRINT $x$
                \ENDIF
            \ENDFOR
        \end{algorithmic}

        %\verb'def print'$_A$\verb'(x):'
        %\verb'    x = 0'
        %\verb'    while True:'
        %\verb'        if' $\chi_A$\verb'(x):'
        %\verb'            print(x)'
        %\verb'        x += 1'

        \begin{proposition}
            Из разрешимости $A$ и $B$ следует разрешимость $A \cap B, \; A \cup B, \; \bar A, \; A \times B$.
        \end{proposition}

        \begin{proof}
        Достаточно предъявить характеристические функции данных множеств:

        \begin{itemize}
            \item $\chi_{A \cap B}(x) = \chi_{A}(x) \cdot \chi_B(x)$
            \item $\chi_{A \cup B}(x) = \chi_{A}(x) + \chi_B(x) - \chi_{A \cap B}(x)$
            \item $\chi_{\bar A}(x) = 1 - \chi_{A}(x)$
            \item $\chi_{A \times B}((x, y)) = \chi_A(x) \cdot \chi_B(y)$
        \end{itemize}

        Понятно, что эти функции вычислимы как композиции вычислимых.
        \end{proof}

    % Вопрос вычислимость 2
    \subsection{Перечислимые множества под действием операций алгебры множеств, декартова произведения и проекции. Теорема Поста. [R, 3--4]}

        \begin{proposition}
             Из перечислимости $A$ и $B$ следует перечислимость $A \cap B, \; A \cup B, \; A \times B, \; \pr^i A$.
        \end{proposition}

        \begin{proof}
        Предложим алгоритмы перечисления этих множеств, подразумевая, что $\mathcal{A}$ и $\mathcal{B}$ --- перечислители $A$ и $B$ соответственно:

        \begin{enumerate}[leftmargin=15mm]
            \item[$A \cap B \;$] Будем параллельно исполнять $\mathcal{A}$ и $\mathcal{B}$ по шагам и сохранять вывод каждого в два буфера. Время от времени (скажем, после каждых 2020 шагов) за конечное время просматриваем оба буфера и выводим элементы, оказавшиеся в обоих. Перечислимость можно также вывести как $\omega_{A \cap B}(x) = \omega_{A}(x) \cdot \omega_B(x)$.

            \item[$A \cup B \;$] Достаточно подать вывод как $\mathcal{A}$, так и $\mathcal{B}$ на выход перечислителя $A \cup B$.

            \item[$A \times B \;$] Аналогично случаю $A \cap B$, только выводить нужно все пары $(a, b) \in A' \times B'$, где $A'$ и $B'$ --- буферы в текущий момент исполнения $\mathcal{A}$ и $\mathcal{B}$. Перечислимость можно также вывести как $\omega_{A \times B}((x, y)) = \omega_A(x) \cdot \omega_B(y)$.

            \item[$\pr^i A \;$] Проекцией $\pr^i A$ называется множество $\{ b \in \NN \mid \exists a_1, \dots, a_k \!: (a_1, \dots, a_{i-1}, \, b, \, a_{i+1}, \dots, a_k) \in A \}$ при $A \subseteq \NN^k$ и $1 \leq i \leq k$. Чтобы перечислить проекцию, запустим $\mathcal{A}$ и будем выводить каждую $i$-тую координату всех полученных элементов множества. \qedhere
        \end{enumerate}
        \end{proof}

        Заметим, что перечислимость $A$ не гарантирует перечислимость $\bar A$ из-за проблемы <<остановки>>: на любом конечном количестве шагов работы перечислителя непонятно, по какой причине он не вывел конкретное число.

        \begin{theorem}[Поста]
            Множество $A$ разрешимо тогда и только тогда, когда $A$ и $\bar A$ перечислимы.
        \end{theorem}

        \begin{proof}
        Из билета 1: $A$ разрешимо $\implies \bar A$ разрешимо. Из разрешимости следует перечислимость, следовательно $A$ и $\bar A$ перечислимы.

        В обратную сторону. Хотим узнать истинность $x \in A$. Для этого будем по очереди исполнять по шагам перечислитель то $A$, то $\bar A$. Так как $x \in \NN = A \cup \bar A$, то $x$ будет напечатан перечислителем ровно одного из двух множеств за конечное число шагов. Если это был перечислитель $A$, то $x \in A$, иначе $x \notin A$. Иными словами,

        \begin{equation*}
        \begin{gathered}
        \chi_A(x) =
        \begin{cases}
        1, & \omega_A(x) = 1 \\
        0, & \omega_{\bar A}(x) = 1 \\
        \end{cases}.
        \end{gathered}\qedhere
        \end{equation*}
        \end{proof}

    % Вопрос вычислимость 3
    \subsection{Теорема о графике вычислимой функции. Перечислимость образа и прообраза множества под действием вычислимой функции. [R, 14]}

        \begin{definition}
        Графиком функции $f : \NN \to \NN$ называется множество его точек $\plot_f = \{ (x, y) \in \NN^2 \mid f(x) = y \}$.
        \end{definition}

        \begin{theorem}[о графике]
        Функция $f$ вычислима $\iff \plot_f$ перечислим.
        \end{theorem}

        \begin{proof}
        \begin{enumerate}
            \item[]

            \item[$\implies$] Перечислим все пары $(x, k) \in \NN^2$, и для каждой запустим алгоритм, вычисляющий $f(x)$. Если спустя $k$ шагов был возвращен результат $y$, то даем на выход точку $(x, y)$ графика. Иначе переходим к следующей паре $(x', k')$. Заметим, что если $f$ не определена в какой-то точке, то никакие конечные $k$ шагов не выдадут значение функции, поэтому алгоритм корректен.

            \item[$\Longleftarrow\;$] Запустим перечислитель $\mathcal{G}$ графика $\plot_f$. Если $f(x)$ определено, то спустя конечное число шагов $\mathcal{G}$ напечатает пару вида $(x, y)$, и тогда верно $f(x) = y$. Иначе $x \notin \pr^1 \plot_f$, и в таком случае $\mathcal{G}$ будет работать бесконечно, что и требуется при неопределенном значении $f$ в точке $x$. \qedhere
        \end{enumerate}
        \end{proof}

        \begin{proposition}
        Функция $f$ вычислима и тотальна $\implies \plot_f$ разрешим.
        \end{proposition}

        \begin{proof}
        \begin{enumerate}
        \item[]

        \item[$\implies$]
        \begin{equation*}
        \begin{gathered}
        \chi_{\plot_f}((x, y)) \;=\;
        \begin{cases}
        1, & (x, y) \in \plot_f \\
        0, & (x, y) \notin \plot_f \\
        \end{cases}
        \;=\;
        \begin{cases}
        1, & f(x) = y \\
        0, & f(x) \ne y \\
        \end{cases}
        \text{ --- \, вычислима.}
        \end{gathered}
        \end{equation*}

        % \item[$\Longleftarrow$]
        % \begin{algorithmic}
        % \ENSURE $f(x)$
        %     \FORALL{$y \in \NN$}
        %         \IF{$\chi_{\plot_f}((x, y))$}
        %             \RETURN $y$
        %         \ENDIF
        %     \ENDFOR
        % \end{algorithmic}
        \end{enumerate}
        \end{proof}

        \begin{proposition}
            Если $f : \NN \to \NN$ вычислима и $A$ перечислимо, то $f(A)$ и $f^{-1}(A)$ перечислимы.
        \end{proposition}

        \begin{proof}
            Заметим, что $f(A) = \pr^2 \bigl( \plot_f \cap (A \times \NN) \bigr)$ и $f^{-1}(A) = \pr^1 \bigl( \plot_f \cap (\NN \times A) \bigr)$. Оба перечислимы, так как проекция, пересечение и декартово произведение перечислимых множеств перечислимы (билет 2).
        \end{proof}

        \begin{corollary}
            Если $f : \NN \to \NN$ вычислима, то $\dom f = f^{-1}(\NN)$ и $\rng f = f(\NN)$ перечислимы.
        \end{corollary}

    % Вопрос вычислимость 4
    \subsection{Перечислимые множества суть, в точности, области определения вычислимых функций. [R, 10]}

        См. утверждение $(1) \iff (3)$ из теоремы ниже.

        \begin{theorem}[равносильные определения перечислимости]
            Следующие утверждения о произвольном множестве $A \subseteq \NN$
            эквивалентны:
            \begin{enumerate}[label=(\arabic*)]
                \item $A$ перечислимо;
                \item полухаракетристическая функция $\omega_A(x) \simeq
                \begin{cases}
                1, & x \in A \\
                \udv, & x \notin A \\
                \end{cases}$
                вычислима;
                \item существует вычислимая функция $f : \NN \to \NN$, такая что $A = \dom f$;
                \item существует вычислимая функция $f : \NN \to \NN$, такая что $A = \rng f$;
                \item $A = \void$ или существует вычислимая тотальная функция $f : \NN \to \NN$, такая что $A = \rng f$;
                \item существует разрешимое $B \subseteq \NN^2$, такое что $A = \pr^i B$.
            \end{enumerate}
        \end{theorem}

        \begin{proof}
        \begin{enumerate}[leftmargin=22mm]
            \item[]
            \item[(1) $\iff$ (2)] Запустим перечислитель $\mathcal{A}$. Если в выводе встречается $x$, то $\omega_A(x) = 1$, иначе алгоритм зациклится на входе $x \notin A$. В обратную сторону: $\dom \omega_A = A \implies A$ перечислимо (см. билет 3).

            \item[(1) $\iff$ (3)] $\dom f = A \implies A$ перечислимо; если $A$ перечислимо, то за $f$ можно взять $\omega_A$.

            \item[(1) $\iff$ (5)] Пусть $A \ne \void$ перечислимо и $\mathcal{A}$ напечатал первое число ровно после $k$ шагов. Тогда зададим $f(n)$ как последнее выведенное перечислителем число ровно после $n + k$-того шага алгоритма. Обратно: $\mathcal{A}$ по очереди перечисляет пары $(x, k) \in \NN^2$ и эмулирует вычисление $k$ шагов значения $f(x)$. $\mathcal{A}$ печатает результат $y$, если он есть, и переходит к следующей паре $(x', k')$.

            \item[(1) $\iff$ (4)] Если $A = \void$, то подойдет $f = \xi$, иначе достаточно взять функцию, описанную в предыдущем пункте. Обратно: аналогично предыдущему пункту.

            \item[(1) $\iff$ (6)] Если $A = \void$, то подойдет $B = \void$, иначе достаточно взять функцию $f$, описанную в пункте $(1) \iff (5)$, и задать $B = \plot_{f}$, тогда $A = \pr^2 B$. Обратно: $B$ разрешимо $\implies B$ перечислимо $\implies \pr^1 B = A$ перечислимо. \qedhere
        \end{enumerate}
        \end{proof}

    % Вопрос вычислимость 5
    \subsection{Непустые перечислимые множества суть, в точности, области значений вычислимых тотальных функций. [R, 10, с. 4]}

        См. утверждение $(1) \iff (5)$ из билета 4.

    % Вопрос вычислимость 6
    \subsection{Перечислимые множества суть, в точности, проекции разрешимых. [R, 10]}

        См. утверждение $(1) \iff (6)$ из билета 4.

    % Вопрос вычислимость 7
    \subsection{Универсальная вычислимая функция (в классе вычислимых функций $\NN \to \NN$). T-Предикат. [R, 7–8]}

        \begin{definition}
        Отображение $U : \NN^2 \to \NN$ --- универсальная вычислимая функция (УВФ), если (а) $U$ вычислима и (б) для любой вычислимой $f : \NN \to \NN$ найдется $n \in \NN$, такое что $\forall x \in \NN \;\; U(n, x) \simeq f(x)$. Иными словами, сечение $U_n$ совпадает с $f$.
        \end{definition}

        Функция $d : \NN \to \NN$ называется диагональю функции $V : \NN^2 \to \NN$, если $\forall x \in \NN \;\; d(x) \simeq V(x, x)$.

        \textbf{Неформально:} алгоритмы можно рассматривать как конечные последовательности байт, поэтому их счетно и каждому тексту программы можно сопоставить его номер из $\NN$. Он и есть первый аргумент $U$, а второй --- аргумент функции, которую вычисляет алгоритм. Получается, УВФ эмулирует вычисление всех вычислимых функций одного аргумента.

        Пусть $U$ --- УВФ, а $\mathcal{U}$ --- алгоритм, вычисляющий ее.

        \begin{definition}
        $T$-предикат --- подмножество $\NN^3$, такое что $(n, x, k) \in T$ тогда и только тогда, когда $\mathcal{U}$ останавливается на входе $(n, x)$ за $k$ шагов. $T'$-предикат --- подмножество $\NN^4$, такое что $(n, x, y, k) \in T$ тогда и только тогда, когда $\mathcal{U}$ останавливается на входе $(n, x)$ за $k$ шагов и возвращает $y$. Ясно, что оба отношения разрешимы, так как можно исполнить $k$ шагов вычисляющего алгоритма и проверить, остановился ли он и вывел ли что-то.
        \end{definition}

    % Вопрос вычислимость 8
    \subsection{Неразрешимость проблем самоприменимости и остановки. Примеры перечислимого неразрешимого и неперечислимого множеств. [R, 23]}

        \begin{proposition}
        Существует перечислимое неразрешимое множество.
        \end{proposition}

        \begin{proof}
        Пусть $U$ --- УВФ. Рассмотрим $K_U = \{ n \in \NN \mid U(n, n) \text{ определено} \} = \dom d_U$. $d_U$ вычислима $\implies K_U = \dom d_U$ перечислимо. \\

        Предположим, что $K_U$ разрешимо, тогда по теореме Поста $\bar K_U$ перечислимо. Тогда вычислима функция

        \begin{equation*}
        \begin{gathered}
        r(x) \simeq \omega_{\bar K_U}(x) \simeq
        \begin{cases}
        1, & x \notin K_U \\
        \udv, & x \in K_U
        \end{cases}.
        \end{gathered}
        \end{equation*}

        Тогда $\exists n \in \NN : \; U_n = r \implies U(n, n) \simeq r(n)$. Приходим к двум случаям:

        \begin{itemize}
            \item $U(n, n)$ определено $\implies n \in \dom d_U \implies n \in K_U \implies r(n)$ не определено, но $U(n, n)$ определено.

            \item $U(n, n)$ не определено $\implies n \notin \dom d_U \implies n \notin K_U \implies r(n) = 1$, но $U(n, n)$ не определено.
        \end{itemize}

        Пришли к противоречию, следовательно $r$ невычислима $\implies$ $\bar K_U$ неперечислимо $\implies K_U$ неразрешимо по теореме Поста. \\

        Итак, $K_U = \dom d_U$ --- искомое перечислимое неразрешимое множество.
        \end{proof}

        Заметим, что найденное $K_U$ --- множество всех программ, останавливающихся на входе из своего текста, поэтому теорема называется также проблемой самоприменимости, которая, как оказалось, неразрешима, то есть невозможно за конечное число шагов узнать, остановится ли программа на входе, совпадающим с ее текстом.

        Эта проблема связана также с проблемой остановки. Рассмотрим $S_U = \dom U \subseteq \NN^2$ --- перечислимое из вычислимости $U$. Сведем $S_U$ к $K_U$, заметив, что $n \in K_U \iff U(n, n)$ определено $\iff (n, n) \in S_U$. Отсюда сразу можем заключить, что $S_U$ неразрешимо $\implies$ проблема остановки неразрешима.

        Таким образом, не существует программы, которая бы за конечное число шагов определяла, остановится ли произвольная программа на любом входе либо входе, совпадающим с ее текстом.

    % Вопрос вычислимость 9
    \subsection{Пример вычислимой функции, не имеющей вычислимого тотального продолжения. [R, 29]}

        \begin{proposition}
        Пусть $U$ --- УВФ и $d$ --- ее диагональ. Тогда для любой вычислимой функции $f : \NN \to \NN$ существует $n \in \NN : \;\; f(n) \simeq d(n)$.
        \end{proposition}

        \begin{proof}
        Ввиду универсальности $U$ найдется номер $n \in \NN : \;\; U_n = f$. Тогда $f(n) \simeq U(n, n) \simeq d(n)$.
        \end{proof}

        \begin{corollary}
        Функция $f$ невычислима, если $\forall n \in \NN \;\; f(n) \not\simeq d(n)$.
        \end{corollary}

        \begin{definition}
        Функция $g : \NN \to \NN$ называется продолжением $f : \NN \to \NN$, если $\forall x \in \dom f \;\, g(x) = f(x)$. Иными словами, $\plot_f \subseteq \plot_g$.
        \end{definition}

        Пусть $d$ --- диагональ произвольной УВФ $U$, а $d'$ --- ее тотальное вычислимое продолжение, тогда функция $g(x) = d'(x) + 42$ тотальна и вычислима как композиция вычислимых тотальных функций. Но $g$ не совпадает с $d$ ни в одной точке, следовательно она не может быть вычислимой --- противоречие.

        Таким образом, диагональная функция произвольной УВФ не имеет тотального вычислимого продолжения.

    % Вопрос вычислимость 10
    \subsection{Область определения вычислимой функции, не имеющей вычислимого тотального продолжения, перечислима, но не разрешима. [R, 32]}

        \begin{proposition}
        Если функция $f$ вычислима, но не имеет вычислимого тотального продолжения, то $\dom f$ --- неразрешимое перечислимое множество.
        \end{proposition}

        \begin{proof}
        Предположим противное: пусть $\dom f$ разрешимо (при этом оно всегда перечислимо --- см. билет 3). Рассмотрим

        \begin{equation*}
        \begin{gathered}
        g(x) =
        \begin{cases}
        f(x), & x \in \dom f \\
        42, & x \notin \dom f \\
        \end{cases}
        \; = \;\chi_{\dom f}(x) \cdot f(x) \,+\, (1 - \chi_{\dom f}(x)) \cdot 42.
        \end{gathered}
        \end{equation*}

        Ясно, что $g$ --- вычислимое тотальное продолжение $f$ --- противоречие. Значит, $\dom f$ неразрешимо и перечислимо.
        \end{proof}

    % Вопрос вычислимость 11
    \subsection{Теорема о рекурсии как следствие теоремы Клини. Пример применения теоремы о рекурсии. [R, 37]}

        Подробнее о теореме Клини --- в 16-м билете.

        \begin{theorem}[о рекурсии]
        Пусть $U$ --- ГУВФ и $V : \NN^2 \to \NN$ вычислима. Тогда $\exists n \in \NN : \; U_n = V_n$.
        \end{theorem}

        \begin{proof}
        Ввиду главности $U$ существует вычислимая тотальная $s : \: \forall k \in \NN \;\; U_{s(k)} = V_k$, а по теореме Клини $\exists n \in \NN : \;\, U_{s(n)} = U_n$. Следовательно, $U_n = V_n$.
        \end{proof}

        Но причем здесь рекурсия? Дело в том, что $V$ можно задать как функцию, зависящую от $U$:

        \begin{itemize}
            \item \begin{example}
                Существование квайнов (программ, выводящих свой текст): $\exists n \in \NN : \; \forall x \; U(n, x) = n$.
            \end{example}

            \begin{proof}
                Функция $V(k, x) = k$ вычислима. По теореме о рекурсии $\exists n \in \NN : \; U(n, x) \simeq V(n, x) = n$.
            \end{proof}

            \item \begin{example}
            Рассмотрим вычислимую функцию

            \begin{equation*}
            \begin{gathered}
            V(k, x) \simeq
            \begin{cases}
            1, & x = 0 \\
            x \cdot U(k, x - 1), & x > 0 \\
            \end{cases}.
            \end{gathered}
            \end{equation*}

            По теореме о рекурсии $\exists n : \; U_n = V_n \implies U(n, 0) = 1$ и $U(n, x) \simeq x \cdot U(n, x - 1)$ при $x > 0$, при этом тотальность $U_n$ доказывается по индукции по $x$. Таким образом, $U(n, x)$ рекурсивно вычисляет факториал второго аргумента.
        \end{example}
        \end{itemize}

        \textbf{Неформально} о смысле теоремы: в главных языках программирования программа может иметь доступ к своему коду, что приводит нас к понятию рекурсии, существование алгоритма для которой гарантирует теорема Клини.

    % Вопрос вычислимость 12
    \subsection{$m$-Сводимость и ее свойства. [R, 52–56]}

        \begin{definition}
        Пусть $A, B \subseteq \NN$. $A \; m$-сводится к $B$ тогда и только тогда, когда существует вычислимая тотальная $f : \NN \to \NN: \; \forall n \; [n \in A \iff f(n) \in B]$. Обозначается как $A \mred B$ или $A \mred^f B$ (если необходимо уточнить функцию сведения). Это определение обобщается на $A \subseteq \NN^n, \; B \subseteq \NN^m$ и $f : \NN^n \to \NN^m$.
        \end{definition}

        Перечислим свойства $m$-сводимости:

        \begin{itemize}
            \item Рефлексивность: $A \mred^{\text{id}_{\NN}} A$

            \item Транзитивность: $A \mred^f B \,\wedge\, B \mred^g C \implies A \mred^{g \circ f} C$

            \item $A \mred^f B \implies \bar A \mred^f \bar B: \;\; n \in \bar A \iff n \notin A \iff f(n) \notin B \iff f(n) \in \bar B \qed$

            \item \textit{Сравнение множеств по алгоритмической сложности:} если $A \mred B$ и $B$ разрешимо (перечислимо), то разрешимо (перечислимо) и $A$.

            \begin{proof}
                $\forall n \;\, \Bigl[\, n \in A \iff \chi_A(n) = 1 \iff \chi_B(f(n)) = 1 \iff f(n) \in B \,\Bigr] \implies \chi_A = \chi_B \circ f$ --- вычислима $\implies A$ разрешимо (аналогично $\omega_A = \omega_B \circ f$).
            \end{proof}

            \item \begin{corollary}
                Если $A \mred B$ и $A$ неразрешимо (неперечислимо), то и $B$ неразрешимо (неперечислимо).
            \end{corollary}
            %\textbf{Следствие.}

            \item Если $A$ разрешимо и $B$ нетривиально $(\void \ne B \ne \NN)$, то $A \mred B$.

            \begin{proof}
            Пусть $b \in B, \, a \in \bar B$, зададим вычислимую $f(n) :=
            \begin{cases}
            b, & n \in A \\
            a, & n \notin A \\
            \end{cases} \implies A \mred^f B$.
            \end{proof}

            \item $\exists A : \; A \not \mred \bar A$. Возьмем $A := \bar K = \NN \wo \dom d$ --- неперечислимое, но $\bar A$ перечислимо --- противоречие сравнению по алгоритмической сложности. $\qed$

            \item $\nexists A : \; \forall B \subseteq \NN \;\, B \mred A$. Одна функция может $m$-сводить к $A$ лишь одно множество, но вычислимых функций счетно, а подмножеств $\NN$ --- несчетно много. $\qed$
        \end{itemize}

    % Вопрос вычислимость 13
    \subsection{Машины Тьюринга (допустимо неформальное определение с лентой и головкой). Сложение натуральных чисел (при унарном и бинарном кодировании) вычислимо по Тьюрингу. [ВШ-3, 9.2]}

        Машина Тьюринга --- устройство, представляющее собой бесконечную ленту, разделенную на ячейки с записанными в них символами, головку, которая движется по ленте и перезаписывает символы в ячейки, и инструкции, оперирующие головкой и задающие некоторый алгоритм.

        Задаются множества $\Gamma$ --- алфавит, символы которого можно использовать при записи в ячейки (в том числе символ пробела <<\verb'#'>>); $\Sigma \subseteq \Gamma$ --- алфавит, в символах которого записан вход (причем \verb'#' $\in \Gamma \wo \Sigma$); $Q$ --- множество состояний, которые принимает головка. Все эти множества обязательно \textbf{конечны}.

        Головка имеет начальное и конечное состояние (обычно они обозначаются как $q_1$ и $q_0$), а также промежуточные состояния, с помощью которых задается алгоритм. Для всех элементов $Q \times \Gamma$ существуют инструкции вида $q c \mapsto q' c' S$. Она означает, что если головка находится в состоянии $q$ и в текущей ячейке записан символ $c$, то головка переходит в состояние $q'$, записывает в текущую ячейку символ $c'$ и сдвигается влево, вправо либо остается на месте ($S \in \{L = \text{<<Left>>}, \, R = \text{<<Right>>}, \, N = \text{<<Neutral>>}\}$). Таким образом, должна быть определена функция инструкций $\delta : Q \times \Gamma \to Q \times \Gamma \times \{N, L, R\}$.

        Для понимания работы машины Тьюринга вводится понятие конфигурации машины --- это строка вида $AqcB$, означающая, что в данный момент на ленте подряд записаны слово $A \in \Gamma^*$, символ $c \in \Gamma$, слово $B \in \Gamma^*$, причем головка находится в состоянии $q$ и указывает на ячейку с символом $c$. Отметим, что, например, $\verb'42'q\verb'195'$ и $\verb'###42'q\verb'195#'$ --- одна и та же конфигурация. На множестве всевозможных конфигураций машины Тьюринга $\mathcal{M}$ задаются отношения $AqcB \underset{\mathcal{M}}{\to} A'q'c'B'$ и $AqcB \underset{\mathcal{M}}{\twoheadrightarrow} A'q'c'B'$, означающие достижимость за один и за сколько угодно шагов работы машины соответственно.

        \bigskip \hrule

        Рассмотрим задачу сложения натуральных чисел. Пусть на вход даны числа $n$ и $m$ в унарном виде, тогда лента будет иметь такой вид:

        $\verb'#####' \underset{\substack{\uparrow \\ q_1 \\}}{\#} \underbrace{11\dots11}_{n}\verb'#'\underbrace{11\dots11}_{m}\verb'######'$

        Тогда для получения суммы $n + m$ достаточно <<склеить>> две последовательности. Поэтому стартуем из начального состояния до пробела, заменяем его на единицу, после чего переходим в новое состояние, доходим до конца записи $m$ и останавливаемся на пробеле. Необходимо перейти в еще одно состояние, чтобы удалить последнюю единицу, после чего дойти до начала входных данных и остановиться.

        Заметим, что если $m = 0$, то добавленная единица будет стерта. При $n = 0$ замена на единицу произойдет также в правильной ячейке ленты.

        В итоге получили такую конфигурацию:

        $\#\#\#\#\#\#\underbrace{11\dots1}_{n}1\underbrace{11\dots\#}_{m}\#\#\#\#\#\#$

        Важно, что кодирование чисел не имеет значения, так как перевод числа в новую кодировку вычислим по Тьюрингу. Вот как двоичная запись превращается в унарную:

        \begin{itemize}
            \item Приходим к концу числа, чтобы вычесть из него единицу;
            \item При вычитании находимся в состоянии <<нужно из разряда слева попросить единицу, в текущем разряде сейчас поменяю 0 на 1 и сдвинусь влево>>;
            \item Так сдвигаемся, пока либо не получили корректный результат (находясь хоть в середине числа), либо до конца числа (это будет значить, что все нули превратились в единицы, то есть произошло переполнение и пора заканчивать алгоритм);
            \item Теперь необходимо добавить единичку в унарное представление числа, для чего идем в правый конец и на место второго пробела записываем единицу (первый же пробел служит разделителем входа и выхода алгоритма);
            \item Снова ищем первый пробел, чтобы вернуться в состояние вычитания;
            \item Завершение алгоритма: когда получили некорректное вычитание, головка окажется слева от входа и выхода. Переходим в новое состояние, чтобы пройтись до первого пробела и стереть на своем пути символы измененного входа. Так перейдем в конечное состояние и получим корректный вывод.
        \end{itemize}

        Таким образом, сложение в унарном и бинарном кодировании вычислимо по Тьюрингу.

    % Вопрос вычислимость 14
    \subsection{Главная универсальная вычислимая функция. Вычислимое биективное кодирование пар натуральных чисел. Построение главной у.в.ф. с помощью произвольной у. в. ф. [R, 22, с. 9--10]}

        \begin{definition}
        Отображение $U : \NN^2 \to \NN$ --- главная универсальная вычислимая функция (ГУВФ), если (а) она вычислима и (б) для любой вычислимой $V : \NN^2 \to \NN$ найдется вычислимая тотальная $s : \NN \to \NN$, такая что $\forall n \in \NN \;\; V_n = U_{s(n)}$.
        \end{definition}

        \textbf{Неформально:} можем рассматривать $V$ как другой язык программирования (от которого не требуется универсальность), а $s$ --- как функцию, преобразующую корректную программу в языке $V$ в эквивалентную в языке $U$.

        \begin{proposition}
            Если $U$ --- ГУВФ, то $U$ --- УВФ.
        \end{proposition}

        \begin{proof}
            Рассмотрим произвольную вычислимую функцию $f$, для которой хотим найти номер $n$ ее сечения в $U$. Введем $V : \NN^2 \to \NN$, такую что каждое ее сечение совпадает с $f$. Ввиду главности $U$ существует вычислимая тотальная $s: \: \forall k \in \NN \;\; U_{s(k)} = V_k$. Тогда за $n$ можно взять любой элемент из $\rng s$, например, $n := s(42) \implies f = V_{42} = U_{s(42)} = U_n$. Следовательно, $U$ обладает свойством универсальности.
        \end{proof}

        \begin{proposition}
        Если существует УВФ, то существует и ГУВФ.
        \end{proposition}

        \begin{proof}
        Зафиксируем УВФ $U$ и введем кодирование пар, для этого рассмотрев любую вычислимую биекцию $h : \NN^2 \to \NN$ $\left( \text{например, } h(n, m) = \frac{(n + m)(n + m + 1)}{2} + n \right)$. Пусть код пары --- функция $\pair{n, m} := h(n, m)$, а также $\pi^1(\pair{n, m}) = n$ и $\pi^2(\pair{n, m}) = m$ (они вычислимы, так как можем перечислить $\NN^2$ и найти единственную подходящую пару).

        Рассмотрим $W : \NN^2 \to \NN$, такую что $\forall n \, \forall x \;\, W(n, x) \simeq U(\pi^1(n), \pair{\pi^2(n), x})$ --- вычислима как композиция вычислимых функций. Установим свойство главности для $W$.

        Пусть $V : \NN^2 \to \NN$ --- произвольная вычислимая функция, а $V' : \NN \to \NN$, такая что $V'(x) \simeq V(\pi^1(x), \pi^2(x))$ --- тоже вычислима. Тогда $\exists \, m \in \NN : \; U_m = V'$. Положим $s(n) := \pair{m, n}$ --- вычислимая тотальная.

        Далее,

        \begin{equation*}
        \begin{gathered}
        \forall n \, \forall x \;\; W\bigl(s(n), \, x\bigr) \simeq W\bigl(\pair{m, n}, \, x\bigr) \simeq U\bigl(\pi^1(\pair{m, n}), \, \bigl\langle \pi^2(\pair{m, n}), \, x \bigr\rangle \bigr) \simeq U\bigl(m, \, \pair{n, x}\bigr) \simeq U_m\bigl(\pair{n, x}\bigr) \simeq
        \\
        \simeq V'\bigl(\pair{n, x}\bigr) \simeq V\bigl(\pi^1(\pair{n, x}), \, \pi^2(\pair{n, x})\bigr) \simeq V(n, x) \implies \forall n \in \NN \;\; W_{s(n)} = V_n \implies W \text{ --- ГУВФ}
        \end{gathered}
        \end{equation*}
        \end{proof}

        При этом УВФ, не являющаяся главной --- <<объект в некотором роде экзотический>>, хотя ее существование доказывается в билете 21.

    % Вопрос вычислимость 15
    \subsection{Невозможность универсальной вычислимой тотальной функции. [?, 9.15], [ВШ-3, 2.2, т. 8]}

        \begin{proposition}
        Не существует универсальной вычислимой тотальной функции $W$.
        \end{proposition}

        \begin{proof}[Парадокс самоприменимости.]
        Пусть $d : \NN \to \NN$ --- диагональная функция $W: \; d(x) = W(x, x)$. Заметим, что $d$ вычислима и тотальна из существования этих свойств у $W$. Введем также $g(x) = d(x) + 1$, которая по тем же причинам вычислима и тотальна.

        $W$ универсальна, следовательно $\exists m \in \NN : W_m = g \implies W(m, x) = g(x) \; \forall x \in \NN$. Возьмем $x = m$ и тогда получим $W(m, m) = g(m) = d(m) + 1 = W(m, m) + 1 \implies 0 = 1$ --- противоречие $\implies$ УВТФ не существует.
        \end{proof}

        Заметим, что так же <<доказать>> несуществование УВФ $U$ не получится, так как запись $U(m, m) \simeq U(m, m) + 1$ как раз имеет место, если на этих аргументах функция не определена.

    % Вопрос вычислимость 16
    \subsection{Теорема Клини о неподвижной точке. [R, 36]}

        \begin{theorem}[Клини о неподвижной точке]
            Пусть $U$ --- ГУВФ. Тогда для любой вычислимой тотальной $f : \NN \to \NN \;\; \exists n \in \NN : \;\, U_{f(n)} = U_n$.
        \end{theorem}

        \textbf{Неформально:} в главном языке программирования $U$ никакое алгоритмическое преобразование программ $f$ не меняет смысл всех программ разом.

        \begin{proof}
            Рассмотрим $V : \NN^2 \to \NN$, такую что $\forall k \, \forall x \;\, V(k, x) \simeq U\bigl( U(k, k), \, x \bigr)$ --- вычислима как композиция вычислимых, откуда из главности $U$ существует вычислимая тотальная $s : \NN \to \NN$, такая что $U_{s(k)} = V_k = U_{U(k, k)} \; \forall k \in \NN$.

            Теперь берем произвольную $f$ из формулировки теоремы. $f \circ s$ вычислима тотальна $\implies \exists t : \, U_t = f \circ s \implies U(t, t) = f(s(t))$, тогда $U_{s(t)} = U_{U(t, t)} = U_{f(s(t))}$. Тогда для $f$ найдется $n = s(t)$, такое что $U_{f(n)} = U_n$.
        \end{proof}

        <<Более интуитивное>> доказательство есть в учебнике Верещагина.

    % Вопрос вычислимость 17
    \subsection{Индексные множества. Теорема Райса-Успенского: вывод из теоремы Клини. [R, 48] Пример применения.}

        Пусть $\mathcal{F}$ --- семейство вычислимых функций одного аргумента. Назовем его индексным множеством относительно ГУВФ $U$ множество $F = \{ n \in \NN \mid U_n \in \mathcal{F} \}$.

        \begin{theorem}[Райса-Успенского]
            Если семейство $\mathcal{F}$ вычислимых функций нетривиально (то есть $\void \ne F \ne \NN$), то его индексное множество $F$ относительно любой ГУВФ неразрешимо.
        \end{theorem}

        \textbf{Неформально:} множество программ, которые вычисляют функцию с какоим-то нетривиальным свойством, неразрешимо. \textbf{Еще проще:} по номеру программы нельзя наперед узнать, обладает ли она нетривиальным свойством. Например, где-то определена или монотонно возрастает на своей области определения.

        \begin{proof}[Доказательство (Есенина-Вольнина)]
        Пусть $f \in \mathcal{F}$ и $g \notin \mathcal{F}$ вычислимы. Ввиду универсальности $U \; \exists n \, \exists m : \; f = U_n$ и $g = U_m$.

        Предположим противное: пусть $F$ разрешимо, тогда вычислима тотальная функция

        \begin{equation*}
        \begin{gathered}
        h(k) =
        \begin{cases}
        m, & k \in F \\
        n, & k \notin F \\
        \end{cases}.
        \end{gathered}
        \end{equation*}

        В таком случае можно применить теорему Клини: $\exists \, t : \; U_t = U_{h(t)}$. Рассмотрим два случая:

        \begin{itemize}
            \item $t \in F \implies U_t = U_{h(t)} \in \mathcal{F} \implies h(t) = m \implies U_m = g \in \mathcal{F}$ --- противоречие.

            \item $t \notin F \implies U_t = U_{h(t)} \notin \mathcal{F} \implies h(t) = n \implies U_n = f \notin \mathcal{F}$ --- противоречие.
        \end{itemize}

        Следовательно, множество $F$ неразрешимо.
        \end{proof}

    % Вопрос вычислимость 18
    \subsection{Индексные множества. Теорема Райса-Успенского: доказательство с помощью сведения. [R, 47] Пример применения.}

        Все формулировки в предыдущем билете.

        \begin{proof}[Доказательство (Райса)]
            Пусть $\xi \notin \mathcal{F} \implies \exists f \in \mathcal{F}: \; f \ne \xi$. Рассмотрим любое перечислимое неразрешимое $K$ и вычислимую $V(n, x) \simeq f(x) \cdot \omega_K(n)$. Из главности $U$ следует существование вычислимой тотальной $s : \; U_{s(n)} = V_n$. Рассмотрим два случая:

            \begin{itemize}
                \item $n \in K \implies V_n = f \in \mathcal{F} \implies U_{s(n)} \in \mathcal{F} \implies s(n) \in F$

                \item $n \notin K \implies V_n = \xi \notin \mathcal{F} \implies U_{s(n)} \notin \mathcal{F} \implies s(n) \notin F$
            \end{itemize}

            Получили, что $n \in K \iff s(n) \in F \implies K \mred^s F$, причем $K$ неразрешимо, поэтому неразрешимо и $F$ (по свойствам $m$-сводимости, билет 12).

            Пусть теперь $\xi \in \mathcal{F}$. Тогда просто применим такое же доказательство к множеству $\bar F$ и получим тот же результат.
        \end{proof}

    % Вопрос вычислимость 19
    \subsection{Пример неперечислимого множества с неперечислимым дополнением. [R, 61 или 64]}

        Пусть $U$ --- ГУВФ. Докажем, что множество $Z = \{n \in \NN \mid \dom U_n = 2\NN \}$ и $\bar Z$ неперечислимы (задача 4c домашнего задания №3).

        Пусть $K$ --- неразрешимое перечислимое множество, откуда $\bar K$ неперечислимо по теореме Поста (билет 2). Введем две функции:

        \begin{equation*}
        \begin{gathered}
        V(n, x) \simeq
        \begin{cases}
        1, & n \in K \cap x \divby 2 \\
        \udv, & \text{иначе} \\
        \end{cases}
        \text{ --- вычислима как } \omega_{K}(n) \text{ с дополнительной проверкой четности } x
        \\[6 pt]
        \text{Тогда из главности } U \;\; \exists s: \; \forall n \in \NN \;\;\; U_{s(n)} = V_n \implies
        \\
        \implies \Bigl[\; n \in K \iff \dom V_n = 2\NN \iff \dom U_{s(n)} = 2\NN \iff s(n) \in Z \;\Bigr] \implies
        \\
        \implies K \mred^s Z \implies \bar K \mred \bar Z \implies \bar Z \text{ неперечислимо по свойствам $m$-сводимости.}
        \\[10 pt]
        V'(n, x) \simeq
        \begin{cases}
        1, & n \in K \cup x \divby 2 \\
        \udv, & \text{иначе} \\
        \end{cases}, \;\; \text{аналогично} \;\, \exists s': \; \forall n \in \NN \;\;\; U_{s'(n)} = V'_n \implies
        \\[4 pt]
        \implies \Bigl[\; n \in K \iff \dom V'_n \ne 2\NN \iff \dom U_{s'(n)} \ne 2\NN \iff s'(n) \notin Z \iff s'(n) \in \bar Z \;\Bigr] \implies
        \\
        \implies K \mred^{s'} \bar Z \implies \bar K \mred Z \implies Z \text{ неперечислимо по свойствам $m$-сводимости.}
        \end{gathered}
        \end{equation*}

    % Вопрос вычислимость 20
    \subsection{Пример непересекающихся перечислимых множеств, не отделимых никаким разрешимым множеством. [R, 34], [G, с. 21–22]}

        Пусть $A, B \subseteq \NN$. Множество $C \subseteq \NN$ отделяет $A$ от $B$, если $A \subseteq C$ и $B \subseteq \bar C$.

        \begin{proposition}
        Существуют перечислимые множества $A$ и $B$, не отделимые никаким разрешимым множеством.
        \end{proposition}

        \begin{proof}
        Зафиксируем УВФ $U$ и ее диагональ $d$. Зададим вычислимую функцию

        \begin{equation*}
        \begin{gathered}
        f(x) \simeq
        \begin{cases}
        0, & x \in \dom d \,\wedge\, d(x) > 0 \\
        1, & x \in \dom d \,\wedge\, d(x) = 0 \\
        \udv, & x \notin \dom d \\
        \end{cases}.
        \end{gathered}
        \end{equation*}

        Заметим, что у $f$ не существует вычислимого тотального продолжения, так как $\plot_f \cap \plot_d = \void$ (см. билет 9).

        Положим $A = f^{-1}(1), \; B = f^{-1}(0)$ --- перечислимы как прообразы перечислимых множеств под действием вычислимой функции $f$ (билет 3). Пусть также $C$ разрешимо и отделяет $A$ от $B$. Тогда $x \in A \implies \chi_C(x) = 1 = f(x), \;\;\; x \in B \implies \chi_C(x) = 0 = f(x)$, при этом $A \cup B = \dom f$, следовательно $\forall x \in \dom f \;\; f(x) = \chi_C(x) \implies \chi_C$ --- тотальное продолжение $f \implies \chi_C$ невычислима $\implies C$ неразрешимо.
        \end{proof}

    % Вопрос вычислимость 21
    \subsection{Существование неглавной у. в. ф. [R, 49]}

        \begin{proposition}
            Существует \textbf{не}главная УВФ.
        \end{proposition}

        \begin{proof}
        Пусть $U$ --- ГУВФ, а множество $Z = \{n \in \NN \mid U_n = \xi\}$. Тогда его дополнение

        \begin{equation*}
        \begin{gathered}
        \bar Z \,=\, \{n \in \NN \mid U_n \ne \xi\} \,=\, \{n \in \NN \mid \exists x : \; U_n(x) \text{ определено}\} \,=\, \{n \in \NN \mid \exists x \, \exists k : \; T(n, x, k)\}
        \end{gathered}
        \end{equation*}

        перечислимо как проекция разрешимого $T$, откуда существует вычислимая $f : \NN \to \NN$, такая что $\rng f = \bar Z$ (эквивалентное определение перечислимости, см. билет 4). При этом $Z$ неперечислимо, иначе по теореме Поста $Z$ было бы разрешимым (билет 2), что невозможно по теореме Райса-Успенского (билет 17).

        Зададим функцию двух аргументов
        \begin{equation*}
        \begin{gathered}
        W(n, x) \simeq
        \begin{cases}
        \udv, & n = 0 \\
        U(f(n - 1), x), & n \ne 0 \\
        \end{cases}.
        \end{gathered}
        \end{equation*}

        $W$ вычислима как композиция вычислимых функций, а также универсальна: \: если вычислимая $g$ равна $\xi$, то ее номер в $W$ --- ноль, иначе $g = W_{f^{-1}(k) + 1}$, где $g = U_k$. Получили $Z' = \{n \in \NN \mid W_n = \xi\} = \{0\}$, то есть в языке программирования $W$ у нигде не определенной функции есть только одна вычисляющая ее программа с номером 0. $Z'$ --- разрешимое индексное множество нетривиального семейства вычислимых функций, поэтому $W$ --- неглавная УВФ, иначе не выполняется теорема Райса-Успенского (билет 17).
        \end{proof}

    % Вопрос вычислимость 22
    \subsection{Бесконечность множества неподвижных точек в смысле теоремы Клини. [R, 45]}

        \begin{proposition}[семинарская задача 3.7]
            Пусть $U$ --- ГУВФ и $f : \NN \to \NN$ вычислима. Тогда множество неподвижных точек $X = \{n \in \NN \mid U_n = U_{f(n)}\}$ бесконечно.
        \end{proposition}

        \begin{proof}
            Предположим противное: пусть $X$ конечно, а значит и разрешимо. Так как вычислимых функций бесконечно много, то найдется такая $g : \NN \to \NN$, что ее индексное множество $\{n \in \NN \mid U_n = g\}$ не пересекается с $X$. Пусть $U_m = g$. Введем функцию

            \begin{equation*}
            \begin{gathered}
            h(n) =
            \begin{cases}
            m, & n \in X \\
            f(n), & n \notin X \\
            \end{cases}
            \end{gathered}
            \end{equation*}

            Она вычислима и тотальна в силу этих свойств у $f$ и $\chi_X$. Тогда по теореме Клини $\exists n \in \NN : \; U_n = U_{h(n)}$.

            \begin{itemize}
                \item $n \in X$: \; тогда $h(n) = m \ne n$, так как $m \notin X$. Получаем, что $U_n = U_m = g \implies n \notin X$ --- противоречие.

                \item $n \notin X$: \; тогда $U_n = U_{f(n)} \implies n \in X$ --- противоречие.
            \end{itemize}

            Получаем, что множество неподвижных точек для произвольных УВФ и ВФ бесконечно.
        \end{proof}

    % Вопрос вычислимость 23
    \subsection{Вычислимость индекса композиции вычислимых функций. [R, 42] Совместная рекурсия: решение «систем уравнений». [R, 43]}

        \begin{proposition}
            Если $U$ --- ГУВФ, то существует вычислимая тотальная $c$, такая что $\forall p, \, q \in \NN \;\; U_{c(p, q)} = U_p \circ U_q$.
        \end{proposition}

        \textbf{Неформально:} зная тексты программ $p$ и $q$, можно автоматически сгенерировать программу, вычисляющую их композицию.

        \begin{proof}
            Достаточно ввести функцию $V(n, x) \simeq U\bigl(\pi^1(n), \, U\bigl(\pi^2(n), x\bigr)\bigr)$, вычислимую как композицию вычислимых. Ввиду главности $U$ существует вычислимая тотальная $s: \; \forall n \in \NN \;\; U_{s(n)} = V_n$. Зададим $c(x, y) := s(\pair{x, y})$. Тогда имеем

            \begin{equation*}
            \begin{gathered}
            \forall p \, \forall q \, \forall x \;\; U_{c(p, q)}(x) \simeq U_{s(\pair{p, q})}(x) \simeq V_{\pair{p, q}}(x) \simeq U\bigl(\pi^1(\pair{p, q}), \, U\bigl(\pi^2(\pair{p, q}), x\bigr)\bigr) \simeq U\bigl(p, \, U(q, x)\bigr) \simeq \bigl(U_p \circ U_q\bigr)(x)
            \end{gathered}
            \end{equation*}
        \end{proof}

        \begin{theorem}[о совместной рекурсии]
            Пусть $U$ --- ГУВФ, а $V_1, V_2 : \NN^3 \to \NN$ вычислимы. Тогда

            \begin{equation*}
            \begin{gathered}
            \exists a, \, \exists b : \; \forall x \;
            \begin{cases}
            U(a, x) \simeq V_1(a, b, x) \\
            U(b, x) \simeq V_2(a, b, x) \\
            \end{cases}
            \end{gathered}
            \end{equation*}
        \end{theorem}


\section{Вопросы по логике}

    % Вопрос логика 1
    \subsection{Структуры и сигнатуры. Нормальные структуры. Изоморфизм структур. [MD]}

    % Вопрос логика 2
    \subsection{Формулы первого порядка данной сигнатуры. Параметры (свободные переменные) формулы. Предложения. [F, с. 1–2]}

    % Вопрос логика 3
    \subsection{Оценка переменных. Значение терма и формулы в данной структуре при данной оценке. [F, с. 2–3] Независимость значения формулы от значений переменных, не являющихся ее параметрами. [F, 5]}

    % Вопрос логика 4
    \subsection{Значение терма и формулы на наборе элементов структуры. Выразимые в структуре множества (отношения, функции, элементы). Примеры выразимых множеств. [MD] [F, с. 4]}
    \begin{proposition}[значение формулы на наборе элементов структуры]
        Зафиксируем $(x_1, x_2, ..., x_n) \in Var^n$, $x_1, ..., x_n$ попарно различны. Если $FV(\varphi) \subseteq \{x_1, ..., x_n\}$, то в качестве упрощённой записи будем писать $\varphi(x_1, ..., x_n)$. Пусть $\overrightarrow{a} = (a_1, ..., a_n) \in M^n$, тогда
        $$\forall \varphi(x_1, ..., x_n) \; \forall \overrightarrow{a} \; \forall \mathcal{\pi} \; \mathcal{M} \vDash \varphi(\overrightarrow{a}) \Leftrightarrow [\varphi]_{\mathcal{M}} (\pi_{x_1 \; x_2 \; ... \; x_n}^{a_1 \; a_2 \; ... \; a_n}) = 1$$
    \end{proposition}

    \begin{definition}
        Формула $\varphi(x_1, ..., x_n) \in Fm_{\sigma}$ выражает отношение $X \subseteq M^n$ в интерпретации $\mathcal{M}$ сигнатуры $\sigma \Leftrightarrow \forall \overrightarrow{a} \in M^n \; (\mathcal{M} \vDash \varphi(\overrightarrow{a}) \Leftrightarrow \overrightarrow{a} \in X)$. (Тогда пишут ещё $\varphi^{\mathcal{M}} = X$).
    \end{definition}

    Примеры выразимых множеств: \\
    \begin{enumerate}
        \item[1)] Пусть есть $\mathcal{M} = (\mathbb{N}; =^{(2)}; +^{(2)})$. В $\mathcal{M}$ выразимы ($\Leftrightarrow \exists \varphi$, которая выражает) $\{0\} \subseteq \mathbb{N}'; \text{ЧЁТНОЕ} \subseteq \mathbb{N}; \leq, < \; \subseteq \mathbb{N}^2$ \\
        \begin{itemize}
            \item $\varphi_0(x) \eqcirc \forall y \; (x + y = y)$ \\
            $\mathcal{M} \vDash \varphi_0(a) \Leftrightarrow a = 0 \Leftrightarrow a \in \{0\}$ \\
            \item $\varphi_{\text{чётн.}}(x) \eqcirc \forall y \; (x = y + y)$ \\
            $\mathcal{M} \vDash \varphi_{\text{чётн.}}(a) \Leftrightarrow a\text{ чётно} \Leftrightarrow a \in \text{ЧЁТНОЕ}$ \\
            \item $\varphi_{\leq}(x, y) \eqcirc \forall z \; (x + z = y)$ \\
            $\forall (a, b) \in \mathbb{N}^2 \; \mathcal{M} \vDash \varphi_{\leq}(a, b) \Leftrightarrow a \leq b$ \\
            \item $\varphi_{<}(x, y) \eqcirc \varphi_{\leq}(x, y) \wedge \neg (x = y)$
        \end{itemize}
        \item[2)] В поле $\mathcal{R}$ выразимо отношение $\mathbb{R}_{\geq 0}$ \\
        \begin{itemize}
            \item $\varphi_{\geq 0}(x) = \exists y \; (y \cdot y = x)$ \\
            $\forall a \in \mathbb{R} \; \mathcal{R} \vDash \varphi_{\geq 0}(a) \Leftrightarrow a \geq 0 \Leftrightarrow a \in \mathbb{R}_{\geq 0}$
        \end{itemize}
    \end{enumerate}
    % Вопрос логика 5
    \subsection{Значение формулы при изоморфизме структур. Элементарная эквивалентность структур. Изоморфные структуры элементарно эквивалентны. [MD, 10.5]}

    % Вопрос логика 6
    \subsection{Значение формулы при изоморфизме структур. Сохранение выразимых множеств автоморфизмами структуры. Примеры невыразимых множеств. [MD, 10.5]}

    % Вопрос логика 7
    \subsection{Эквивалентность формул первого порядка. [F, с. 4] Лемма о фиктивном кванторе. [F, 10] Общезначимые и выполнимые формулы. Квантор всеобщности и общезначимость. [F, 12]}

    % Вопрос логика 8
    \subsection{Основные эквивалентности логики первого порядка [F, 24]. Замена подформулы на эквивалентную. [F, 26, 30]}

    % Вопрос логика 9
    \subsection{Булевы комбинации формул. Булева функция, соответствующая булевой комбинации. Теорема о приведении булевой комбинации к дизъюнктивной нормальной форме и к конъюнктивной нормальной форме.}

    % Вопрос логика 10
    \subsection{Лемма о корректной подстановке. [F, 73]}

    % Вопрос логика 11
    \subsection{Понятие корректной подстановки («терм свободен для переменной в формуле»). Пример некорректной подстановки. Лемма о корректной подстановке (без доказательства). [F, 73] Переименование связанной переменной. [F, 16, 18]. Общезначимость формул вида $\forall x \; \phi \to \phi(t/x)$ и $\phi(t/x) \to \exists x \; \phi$ в случае корректной подстановки. [F, 74]}

    % Вопрос логика 12
    \subsection{Переименование связанной переменной (без доказательства). [F, 16] Теорема о предваренной нормальной форме. [F, 36]}
    \begin{proposition}[Переименование связанных переменных]

        Если $y \notin V(\varphi)$, то $\begin{cases}
        \forall x \; \varphi \equiv \forall y \; \varphi(y/x) \\
        \exists x \; \varphi \equiv \exists y \; \varphi(y/x)
        \end{cases}$
    \end{proposition}

    \begin{theorem}
        $\forall \varphi \in Fm \;\; \exists \text{(не единственная) предварённая } \varphi' \text{такая, что } \varphi \equiv \varphi'$. Такая $\varphi'$ называется предварённой нормальной формой формулы $\varphi$.
    \end{theorem}

    \textbf{Неформально:} в абсолютно любой формуле можно вынести кванторы наружу.

    \begin{proof}
        Воспользуемся индукцией по построению $\varphi$.

        \textbf{База: } Если $\varphi = R(t_1..t_n)$ (то есть $\varphi$ атомарная), то $\varphi' = \varphi$ (сама уже предварённая).

        \textbf{Шаг:}
        \begin{itemize}
        \item Если $\varphi = \forall x \psi$, то по предположению индукции $\exists$ предварённая $\psi'$ такая, что $\psi \equiv \psi'$, тогда $\varphi = \forall x \psi \equiv \forall x \psi' = \varphi'$.
        \item Если $\varphi = \exists x \psi$, то по предположению индукции $\exists$ предварённая $\psi'$ такая, что $\psi \equiv \psi'$, тогда $\varphi = \exists x \psi \equiv \exists x \psi' = \varphi'$.
        \item Если $\varphi = \neg \psi$, то по предположению индукции $\exists$ предварённая $\psi'$ такая, что $\psi \equiv \psi'$. Заметим, что $\psi'$ имеет вид $Q_1x_1..Q_nx_n \; \psi_0$, где $Q_1,..,Q_n$ --- кванторы, а $\psi_0$ атомарная.

        $\varphi = \neg \psi \equiv \neg \psi' = \neg Q_1x_1..Q_nx_n \; \psi_0 = \overline{Q_1}x_1..\overline{Q_n}x_n \; \neg \psi_0 = \varphi'$ (здесь $\overline{\forall} = \exists, \overline{\exists} = \forall)$.
        \item $\varphi = \psi \wedge \theta$. По предположению индукции $\psi \equiv Q_1x_1..Q_nx_n \; \psi_0$, $\theta \equiv Q_1'y_1..Q_m'y_m \; \theta_0$

        $\varphi = Q_1x_1..Q_nx_n \; \psi_0 \wedge Q_1'y_1..Q_m'y_m \; \theta_0$. Пусть $z_1, .., z_n, w_1, .., w_m$ --- ''свежие''{} ($\notin V(\varphi)$) и различные между собой переменные.

        Тогда по теореме о переименовании связанных переменных $\varphi \equiv  Q_1z_1..Q_nz_n \; \psi_0(z/x) \wedge Q_1'w_1..Q_m'w_m \; \theta_0(w/y) \equiv \\ \equiv Q_1z_1..Q_nz_n Q_1'w_1..Q_m'w_m \; \psi_0(z/x) \wedge \theta_0(w/y) = \varphi'$.

        Аналогично для остальных логических связок.
        \end{itemize}
    \end{proof}

    \begin{example}
        Приведем формулу $\neg \forall x Pxy \vee \exists y Qzxy$ к предварённой нормальной форме.
        \begin{gather*}
            \neg \forall x Pxy \vee \exists y Qzxy \implies \exists x \neg Pxy \vee \exists y Qzxy \implies \exists x' \neg Px'y \vee \exists y Qzxy \implies \\ \implies \exists x' (\neg Px'y \vee \exists y Qzxy) \implies \exists x' (\neg Px'y \vee \exists y' Qzxy') \implies \exists x' \exists y' (\neg Px'y \vee Qzxy')
        \end{gather*}
    \end{example}

    % Вопрос логика 13
    \subsection{Понятие теории первого порядка. Примеры содержательных теорий. Модель теории. Семантическое (логическое) следование (для замкнутых формул) [ВШ-2, с. 187]}

    % Вопрос логика 14
    \subsection{Сколемизация предваренной формулы. Сколемовская нормальная форма. Теорема о равновыполнимости.}

    % Вопрос логика 15
    \subsection{Исчисление резолюций для произвольных множеств формул. Теорема о коррект- ности.
        Теорема о полноте (без доказательства).}

    В исчислении резолюций есть 2 правила.


    \underline{Правило вывода (резолюции)}. $\boxed{\frac{\neg A \lor B \; \; \; A \lor C}{B \lor C} } $

    Частный случай ПР -- вывод пустой дизъюнкции (лжи): $\frac{A \; \; \; \neg A}{\perp}.$



    \underline{Правило подстановки.} $\boxed{\frac{\forall y A}{A(t/y)}} \; $, где $t$ -- произвольный терм, $A$ -- универсальна.


    Говорят, что формула $\varphi$ \underline{выводится} из множества  формул $\Gamma$ в исчислении резолюций, если $\varphi$ возможно получить из формул в $\Gamma$, применяя к ним правило резолюции и правило подстановки какое-то конечное число раз.

    Обозначение: $\Gamma \vdash \varphi.$

    \underline{Корректность ПР}. $\forall M \; \forall \pi$ если $[\neg A \lor B]_M (\pi) = 1$  и $[ A \lor C]_M (\pi) = 1,$ то $[B \lor C]_M (\pi) = 1.$

    Другими словами, импликация $( (\neg A \lor B) \land (A \lor C) \to (B \lor C) )$ общезначима.

    \begin{proof} По контрапозиции.

    $[B \lor C]_M (\pi) = 0 \implies \left([B]_M (\pi) = 0\right) \land \left([C]_M (\pi) = 0\right) \implies [\neg A \lor B]_M (\pi) = 0 \lor   [ A \lor C]_M (\pi) = 0 \implies$

    $ \neg([\neg A \lor B]_M (\pi) = 1 \land   [ A \lor C]_M (\pi) = 1).$
    \end{proof}


    \underline{Корректность ПП.} Пусть $A$ -- универсальна.

    $\forall M \; \forall \pi$ если $[ \, \forall y \,  A \, ]_M (\pi) = 1,$  то $[ \, A(t/y) \, ]_M (\pi) = 1.$

    \begin{proof}
    Допустим, $A \eqcirc \forall \, \overrightarrow{x} A_0$, где $A_0$ -- бескванторная формула.

    $[\forall \, y \, \forall \, \overrightarrow{x} \, A_0 ]_M (\pi) = 1 \iff \forall \, a \in M \, \forall  \overrightarrow{b} \in M^n \;  \; [A_0] \left(\pi^{a \; \; \overrightarrow{b}}_{y \; \; \overrightarrow{x}} \right) = 1 \iff \forall  \overrightarrow{b} \in M^n \;   \forall \, a \in M  \;  \; [A_0] \left(\pi^{\overrightarrow{b} \; \; a}_{\overrightarrow{x} \; \; y} \right) = 1.$

    Теперь положим $a := [ \, t \,]  \left(\pi_{\overrightarrow{x}}^{\overrightarrow{b}} \right) \implies \forall \overrightarrow{b} \in M^n \; [A_0] \left( \pi_{\overrightarrow{x} \; \; \, y}^{\overrightarrow{b} \; \; \; [ \, t \,]  \left(\pi_{\overrightarrow{x}}^{\overrightarrow{b}} \right)} \right) = 1. \; \; \circledast$

    С другой стороны $[A(t/y)]_M(\pi) = 1 \iff [ \, \forall \overrightarrow{x} \; A_0 (t/y) \,  ]_M (\pi) = 1 \iff \forall \overrightarrow{b} \in M^n \; [ \, A_0(t/y) \, ]_M \left(\pi_{\overrightarrow{x}}^{\overrightarrow{b}} \right) = 1.$

    Так как в $A_0$  нет кванторов, $t-y-A_0.$ Тогда по лемме о корректной подстановке

    $\forall \overrightarrow{b} \in M^n \; [ \, A_0(t/y) \, ]_M \left(\pi_{\overrightarrow{x}}^{\overrightarrow{b}} \right) = 1 \iff \forall \overrightarrow{b} \in M^n \; [A_0] \left( \pi_{\overrightarrow{x} \; \; \, y}^{\overrightarrow{b} \; \; \; [ \, t \,]  \left(\pi_{\overrightarrow{x}}^{\overrightarrow{b}} \right)} \right) = 1,$ что совпадает с  $\circledast.$ Равносильность доказана.

    \end{proof}

    \underline{Теорема о корректности.} Если $\Gamma \vdash \varphi,$ то $\Gamma \vDash \varphi.$

    \begin{proof} Индукция по построению вывода в ИР.

    Применяем утверждения о корректности ПП и ПР, доказанные выше.
    \end{proof}

    \underline{Теорема о полноте}. $\Delta$ -- набор формул в сигнатуре $\sigma$. Если $\Delta \nvdash \perp$, то $\exists M \, \exists \pi \; [\Delta]_M (\pi) = 1,$ причём $|M| \leq max(|\mathbb{N}|, \, | \sigma|). $


    % Вопрос логика 16
    \subsection{Исчисление резолюций для произвольных множеств формул. Теоремы о корректности и о полноте (обе без доказательства). Доказывание общезначимости и логического следования в теории с помощью исчисления резолюций. Пример применения исчисления резолюций (должны присутствовать формулы, не являющиеся универсальными дизъюнктами).}

    % Вопрос логика 17
    
    \subsection*{Теорема компактности (в двух формах: про выполнимость и про логическое следование). Вариант для нормальных моделей (без доказательства). Любой пример применения.}

    \underline{Теорема о компактности-1.}
    
    Если каждое конечное подмножество $\Gamma$ выполнимо ($\iff \Gamma$ "конечно выполнимо"), то $\Gamma$ выполнимо.

    \begin{proof} Контрапозиция. Пусть $\Gamma$ не выполнимо $\implies \Gamma^* \vdash \perp$  по теореме о полноте.
    
    Любой вывод в ИР -- конечное дерево $\implies \exists $ конечное $\Delta \subseteq \Gamma^*$ $\Delta \vdash \perp \implies \exists$ конечное $\Gamma_1 \subseteq \Gamma$, т.ч. $\Delta \subseteq \Gamma^*_1$ и $\Gamma^*_1 \vdash \perp.$
    
    По теореме о корректности $\Gamma^*_1$ невыполнимо $\implies \Gamma_1$ невыполнимо.
    
    Т.е. нашлось конечное невыполнимое подмножество $\Gamma.$
    
    \end{proof}
    
    \underline{Теорема о компактности-2.} Если $\Gamma \vDash \varphi,$ то $\exists$ конечное $\Gamma' \subseteq \Gamma \; \; \Gamma' \vDash \varphi.$
    
    \begin{proof} 

    $\Gamma \vDash \varphi \iff $ невыполнима  $\Gamma \cup \{ \neg \varphi\} \implies \exists$  конечное $\Gamma' \subseteq \Gamma \; \; \Gamma' \cup \{\neg \varphi \}$  невыполнима $\iff \Gamma' \vDash \varphi.$
    
    \end{proof}
    
    Определим $Ax_{=}^{\sigma}$ (аксиомы равенства).
    
    $Ax_{=}^{\sigma}: \{ \, \forall x \; (x = x) \, , \; \; \forall x \;  \forall y \;  (x = y \to y = x) \, , \; \; \; \forall x \; \forall y \; \forall z \;  (x = y \land y = z \to x = z) \, \} \cup \\ \\ \{ (x_1 = y_1 \land \dots \land x_n = y_n) \to ( R_{x_1 \dots x_n} = R_{y_1 \dots y_n})  \mid R^{(n)} \in Rel_{\sigma} \} \cup \\ \{ (x_1 = y_1 \land \dots \land x_n = y_n) \to (f_{x_1 \dots x_n} = f_{y_1 \dots y_n})  \mid f^{(n)} \in Fnc_{\sigma}\}.$ \\
    
    \underline{Утверждение.} Пусть в $\sigma$ есть равенство. У $\Gamma$ есть нормальная модель $(\leq max(|\mathbb{N}|, |\sigma|)) \iff $  выполнима $\Gamma \cup Ax_{=}^{\sigma}.$
    
    \begin{proof}
    $\boxed{\Rightarrow}$ В нормальной модели выполняются аксиомы равенства.
    
    $\boxed{\Leftarrow}$ В каком случае модель, в которой выполнена теория $Ax_{=}^{\sigma} \cup \Gamma$, может оказаться не нормальной? 
    
    Только если у каких-то элементов есть "двойники". 
    
    В этом случае модифицируем модель и склеим все дублирующиеся элементы. $Ax_{=}^{\sigma} \cup \Gamma$ всё ещё выполнима, так как наличие или отсутствие двойников ничего не меняет, но модель уже является нормальной, чего мы и хотели.
    
    \end{proof}
    
    \doublespacing \underline{Компактность для нормальных моделей.} Если у каждого конечного подмножества $\Gamma$ есть нормальная модель, то у $\Gamma$ есть нормальная модель (мощности $\leq max (|\mathbb{N}| , | \sigma| )$).
    
    \begin{proof}
    
    По утверждению выше, $\forall$ конечного $\Gamma_1 \subseteq \Gamma$ выполнима $\Gamma_1 \cup Ax_{=}^{\sigma}$  $\implies \\ 
    \forall$ конечное подмножество $ \Gamma' \subseteq \Gamma \cup Ax_{=}^{\sigma} $ выполнимо $\implies \\ \Gamma \cup Ax_{=}^{\sigma}$ выполнимо (по обычной компактности) $\implies$ у $\Gamma$ есть нормальная модель из утверждения выше.
    
    \end{proof}

    % Вопрос логика 18
    \subsection{Игра Эренфойхта. Формулировка основной теоремы и примеры применения: когда побеждает Новатор, и когда побеждает Консерватор. [ВШ-2, 3.10]}

\end{document}
